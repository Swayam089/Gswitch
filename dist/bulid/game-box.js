"use strict";function addBoxClick(){addToGameBoxAnimation($(".myGameBox").children(".icon"),$(".myGameBoxAddImg"),$(this)),$(window).trigger("gaPushEvent",{event:"gaTriggerEvent",gaEventCategory:"Attitude",gaEventAction:"Add to Game Box",gaEventLabel:Game.id+"||"+Game.title})}function addBox(e,a,t,o){var i=lstorage.gameBox?JSON.parse(lstorage.gameBox):{};i[e]||(i[e]={adi:a,url:t,image:o}),lstorage.setItem("gameBox",JSON.stringify(i)),boxCount()}function boxCount(){var e=lstorage.getItem("gameBox");if(e&&2<e.length){listdata=JSON.parse(e);var a=0;for(var t in listdata)listdata.hasOwnProperty(t)&&a++}else a=0;$(".myGameBox .badge").html(a)}function boxUpdate(){var e=lstorage.getItem("gameBox");e&&2<e.length?(listdata=JSON.parse(e),result="<ul>",$.each(listdata,function(e,a){result+='<li id="data'+e+'"><a href="'+a.url+'"><span class="myGameBoxImg"><img src="'+Setting.urlPathImages()+"/"+a.image+'?auto=format&w=80" width="46" height="35"></span><span class="myGameBoxTitle">'+a.adi+'</span></a><span class="sprite myGameBoxDel" data-id="'+e+'"></span></li>'}),result+="</ul>",$(".myGameBox-content").html(result),$(".myGameBoxDel").click(function(){var e=$(this).attr("data-id");$("#data"+e).hide(500,function(){deleteBox(e),Game.inGameBox=!1,$(".myGameBox").dropdown("enable").dropdown("show")}),e===Game.id&&$(".gamebox_add").removeClass("gamebox_added").bind("click",addBoxClick).attr("title","Add to my Game Box")})):$(".myGameBox-content").html("<ul><li class='myGameBoxEmpty'><span class='glyphicon glyphicon-inbox'></span><span>Your game box<br>is empty.</span></li></ul>"),boxCount()}function deleteBox(e){var a;!lstorage.gameBox||(a=JSON.parse(lstorage.gameBox))[e]&&(delete a[e],lstorage.setItem("gameBox",JSON.stringify(a)),boxUpdate())}function addedBox(e){if(lstorage.gameBox)return!!JSON.parse(lstorage.gameBox)[e]}function addToGameBoxAnimation(e,a,t){var o;t.addClass("gamebox_added").unbind("click").attr("title","This game is in your Game Box."),a&&(o=a.clone().css({opacity:"0.8",position:"absolute","z-index":"9999",width:0,height:0}).animate({width:46,height:35,"margin-left":"-=26","margin-top":"-=20"},200).offset({top:t.offset().top+17,left:t.offset().left+17}).appendTo($("body")).animate({top:e.offset().top+12,left:e.offset().left+12},800,"easeInOutCubic",function(){o.animate({width:0,height:0,"margin-left":0,"margin-top":0},200,function(){$(this).detach(),$(".gamebox_con").jrumble({x:2,y:2,rotation:5,speed:20}).trigger("startRumble"),addBox(Game.id,Game.title,Game.url,Game.imageFile),Game.inGameBox=!0,setTimeout(function(){$(".gamebox_con").trigger("stopRumble")},500)})}))}$(function(){boxCount(),Game.inGameBox=addedBox(Game.id),$(".myGameBox").dropdown("attach","#myGameBoxList"),$("#myGameBoxList").on("show",function(e,a){boxUpdate(),$(".myGameBox-nano").nanoScroller()}).disableSelection()});